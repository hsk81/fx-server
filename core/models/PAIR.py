__author__ = "hsk81"
__date__ = "$Apr 30, 2011 3:20:01 PM$"

###############################################################################################
###############################################################################################

from base.models import *
from django.db import models

###############################################################################################
###############################################################################################

class PAIR (BASE):

    class Meta:

        app_label = 'core'
        verbose_name_plural = 'pairs'

    ###########################################################################################
    ###########################################################################################

    quote = models.CharField (max_length=3, blank=True)
    base = models.CharField (max_length=3, blank=True)
    active = models.BooleanField (default=False)

    ###########################################################################################
    ###########################################################################################

    inverse = property (lambda self: PAIR (quote = self.base, base = self.quote))

    def get_halted (self): return not self.active
    def set_halted (self, value): self.active = not value
    halted = property (get_halted, set_halted)

    ###########################################################################################
    ###########################################################################################

    def __unicode__ (self):

        return "%s/%s" % (self.quote, self.base)

###############################################################################################
###############################################################################################

class WRAP:

    def invoke (cls, method, *args):

        return getattr (WRAP, method) (*args)

    invoke = staticmethod (invoke)

    def get_halted (quote, base):

        return '%s' % PAIR.objects.get (quote = quote, base = base).get_halted ()

    get_halted = staticmethod (get_halted)

###############################################################################################
###############################################################################################

PAIR.invoke = staticmethod (WRAP.invoke)

###############################################################################################
###############################################################################################
